!function(n,e){"use strict";var a={init:function(){n(".cfw-sc-modal").on("click",".cfw-sc-opac",this.openBox).on("click",".close-panel",this.closeBox).on("click",".cfw-sc-remove",this.removeItem).on("change",".cfw-sc-qty",this.addQuantity).on("click",".cfw-sc-toggle-slider",this.showCouponInput).on("submit","form.cfw-sc-sl-apply-coupon",this.applyCoupon).on("click",".cfw-sc-icon-cross",this.removeCoupon).on("click",".cfw-blocker",this.closeBox),n(".single_add_to_cart_button").on("click",this.spAddedtoCart),n(document.body).on("added_to_cart",this.cartRefreshed),n(document.body).on("updated_cart_totals",this.updatedCart)},openBox:function(){n(".cfw-sc-modal").find(".cfw-sc-container").addClass("open"),n(".cfw-sc-modal").find(".cfw-sc-opac .cfw-sc-total").removeClass("open")},closeBox:function(){n(".cfw-sc-modal").find(".cfw-sc-container").removeClass("open"),n(".cfw-sc-modal").find(".cfw-sc-opac .cfw-sc-total").addClass("open")},addCartContent:function(t){n("body").trigger("update_checkout"),n(".cfw-sc-modal").find(".cfw-cart-notice, .cart-items, .cart-meta, .cfw-sc-empty-cart").remove(),n(".cfw-sc-modal").find("header").after(t)},refreshTotal:function(t){n(".cfw-sc-total").find(".cfw-total-qty").html(t)},showCouponInput:function(){n(".cfw-sc-modal").find(".cfw-coupon-input").toggle("slow")},sectionLoader:function(t){var o=n(".cfw-sc-modal").find(".cfw-sc-container .cfw-sc-base > section");t?o.addClass("loading"):o.removeClass("loading")},spAddedtoCart:function(t){t.preventDefault();var o=n(this),c=o.closest("form.cart"),a=o.val(),t=c.find("input[name=quantity]").val()||1,c={action:"sc_woo_ajax_add_to_cart",product_id:c.find("input[name=product_id]").val()||a,product_sku:"",quantity:t,variation_id:c.find("input[name=variation_id]").val()||0,security:e.nonce.add_to_cart};n.ajax({type:"post",url:e.ajax_url,data:c,beforeSend:function(){o.removeClass("added").addClass("loading")},complete:function(){o.addClass("added").removeClass("loading")},success:function(t){t.error&t.product_url?window.location=t.product_url:n(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,o])},error(t){console.log("[Cashier] AJAX add to cart error: ",t)}})},applyCoupon:function(t){t.preventDefault();const o=a,c=n(this).find("input").val();o.__updateCoupon(c,"add")},removeCoupon:function(){const t=a,o=n(this).attr("data-coupon");t.__updateCoupon(o,"remove")},__updateCoupon:function(t,o){const c=a;c.__ajax({action:"sc_add_coupon",act:o,coupon:t},"coupon")},updatedCart:function(){const t=a;t.cartRefreshed(!1)},cartRefreshed:function(t=!0){const o=a;o.__cartRefreshed(),t&&o.openBox()},__cartRefreshed:function(){const t=a;t.__ajax({action:"sc_cart_refreshed"},"cart_refresh")},addQuantity:function(){const t=a,o=n(this).closest(".cfw-sc-product").attr("data-key");t.__addQuantity(o,n(this).val())},__addQuantity:function(t,o){const c=a;c.__ajax({action:"sc_product_update",item_key:t,quantity:o},"add_quantity")},removeItem:function(t){t.preventDefault();const o=a,c=n(this).closest(".cfw-sc-product").attr("data-key");o.__removeItem(c)},__removeItem:function(t){const o=a;o.__ajax({action:"sc_product_remove",item_key:t},"remove_cart")},__ajax(t,o){const c=a;c.sectionLoader(!0),n.ajax({url:e.ajax_url,type:"POST",data:{...t,security:e.nonce[o]},success(t){t.success&&(c.addCartContent(t.data.content),c.refreshTotal(t.data.total)),c.sectionLoader(!1)}})}};a.init()}(jQuery,cfw_ajax_vars);